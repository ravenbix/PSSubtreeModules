{
  "feature": "PSSubtreeModules PowerShell Module",
  "workflow_type": "feature",
  "workflow_rationale": "Complete new module implementation requiring Sampler scaffolding, 13 functions (8 public + 5 private), comprehensive testing with 80%+ coverage, and CI/CD pipeline setup. Multiple components must work together: Git operations, YAML configuration, profile management, and dependency validation.",
  "phases": [
    {
      "id": "phase-1-bootstrap",
      "name": "Bootstrap with Sampler",
      "type": "setup",
      "description": "Initialize the PowerShell module structure using Sampler CompleteSample template, configure build settings, and clean up boilerplate",
      "depends_on": [],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-1-1",
          "description": "Run Sampler New-SampleModule to create module structure with CompleteSample template",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "build.ps1",
            "build.yaml",
            "RequiredModules.psd1",
            "source/PSSubtreeModules.psd1",
            "source/PSSubtreeModules.psm1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/PSSubtreeModules.psd1'\"",
            "expected": "True"
          },
          "status": "completed",
          "notes": "Successfully bootstrapped PSSubtreeModules with Sampler CompleteSample template. Created module structure with build.ps1, build.yaml, RequiredModules.psd1, source/PSSubtreeModules.psd1, and source/PSSubtreeModules.psm1. Commit: 5f818b1",
          "updated_at": "2026-02-04T02:50:27.219285+00:00"
        },
        {
          "id": "subtask-1-2",
          "description": "Configure RequiredModules.psd1 with powershell-yaml and build dependencies",
          "service": "PSSubtreeModules",
          "files_to_modify": [
            "RequiredModules.psd1"
          ],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"(Get-Content -Path 'RequiredModules.psd1' -Raw) -match 'powershell-yaml'\"",
            "expected": "True"
          },
          "status": "completed",
          "notes": "Added powershell-yaml dependency to RequiredModules.psd1. Verification passed - grep confirms 'powershell-yaml' is present in the file.",
          "updated_at": "2026-02-04T02:51:50.988721+00:00"
        },
        {
          "id": "subtask-1-3",
          "description": "Update module manifest with powershell-yaml runtime dependency and correct metadata",
          "service": "PSSubtreeModules",
          "files_to_modify": [
            "source/PSSubtreeModules.psd1"
          ],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"(Get-Content -Path 'source/PSSubtreeModules.psd1' -Raw) -match 'powershell-yaml'\"",
            "expected": "True"
          },
          "status": "completed",
          "notes": "Added powershell-yaml runtime dependency (ModuleVersion 0.4.0) to RequiredModules in module manifest. Verification passed - grep confirms 'powershell-yaml' is present in source/PSSubtreeModules.psd1. Commit: c983901",
          "updated_at": "2026-02-04T02:53:13.253950+00:00"
        },
        {
          "id": "subtask-1-4",
          "description": "Clean up Sampler boilerplate and example files, create proper directory structure",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Public/.gitkeep",
            "source/Private/.gitkeep",
            "tests/Unit/Public/.gitkeep",
            "tests/Unit/Private/.gitkeep",
            "tests/Integration/.gitkeep"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Public' -and Test-Path -Path 'source/Private' -and Test-Path -Path 'tests/Unit'\"",
            "expected": "True"
          },
          "status": "completed",
          "notes": "Cleaned up Sampler boilerplate: removed 4 example class files, 2 example functions, and 6 example test files. Created proper directory structure with .gitkeep files in source/Public, source/Private, tests/Unit/Public, tests/Unit/Private, and tests/Integration.",
          "updated_at": "2026-02-04T02:55:16.199730+00:00"
        },
        {
          "id": "subtask-1-5",
          "description": "Verify build pipeline works with initial empty module",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"./build.ps1 -Tasks build -ErrorAction Stop; $LASTEXITCODE -eq 0\"",
            "expected": "True"
          },
          "status": "completed",
          "notes": "Build pipeline verified successfully. Build succeeded with 7 tasks, 0 errors, 0 warnings. Module output created at output/module/PSSubtreeModules/0.0.1/",
          "updated_at": "2026-02-04T02:57:39.934138+00:00"
        }
      ]
    },
    {
      "id": "phase-2-private-functions",
      "name": "Private Helper Functions",
      "type": "implementation",
      "description": "Implement the 5 private helper functions that other functions depend on: YAML config management, Git command execution, and commit info retrieval",
      "depends_on": [
        "phase-1-bootstrap"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-2-1",
          "description": "Implement Invoke-GitCommand helper for executing git commands with error handling",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Private/Invoke-GitCommand.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Private/Invoke-GitCommand.ps1' -and (Get-Content -Path 'source/Private/Invoke-GitCommand.ps1' -Raw).Contains('function Invoke-GitCommand')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Capture stdout/stderr with 2>&1, check $LASTEXITCODE, throw on failure. Foundation for all git operations."
        },
        {
          "id": "subtask-2-2",
          "description": "Implement Get-ModuleConfig for reading subtree-modules.yaml configuration",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Private/Get-ModuleConfig.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Private/Get-ModuleConfig.ps1' -and (Get-Content -Path 'source/Private/Get-ModuleConfig.ps1' -Raw).Contains('ConvertFrom-Yaml -Ordered')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "CRITICAL: Must use -Ordered flag with ConvertFrom-Yaml. Handle missing file gracefully by returning default structure."
        },
        {
          "id": "subtask-2-3",
          "description": "Implement Save-ModuleConfig for writing subtree-modules.yaml configuration",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Private/Save-ModuleConfig.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Private/Save-ModuleConfig.ps1' -and (Get-Content -Path 'source/Private/Save-ModuleConfig.ps1' -Raw).Contains('ConvertTo-Yaml')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Preserve ordered hashtables when writing. Include header comment in YAML output."
        },
        {
          "id": "subtask-2-4",
          "description": "Implement Get-UpstreamInfo for retrieving commit info from remote repository",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Private/Get-UpstreamInfo.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Private/Get-UpstreamInfo.ps1' -and (Get-Content -Path 'source/Private/Get-UpstreamInfo.ps1' -Raw).Contains('ls-remote')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Use git ls-remote to get commit hash for a ref. Handle network errors gracefully."
        },
        {
          "id": "subtask-2-5",
          "description": "Implement Get-SubtreeInfo for retrieving local subtree commit metadata",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Private/Get-SubtreeInfo.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Private/Get-SubtreeInfo.ps1' -and (Get-Content -Path 'source/Private/Get-SubtreeInfo.ps1' -Raw).Contains('git-subtree-dir')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Parse git log for subtree metadata (git-subtree-dir, git-subtree-split). Extract commit hash from squash commits."
        }
      ]
    },
    {
      "id": "phase-3-core-public",
      "name": "Core Public Functions",
      "type": "implementation",
      "description": "Implement the foundational public functions: Initialize (setup), Get (list), and Add (core operation)",
      "depends_on": [
        "phase-2-private-functions"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-3-1",
          "description": "Implement Initialize-PSSubtreeModule to create module repository structure",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Public/Initialize-PSSubtreeModule.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Public/Initialize-PSSubtreeModule.ps1' -and (Get-Content -Path 'source/Public/Initialize-PSSubtreeModule.ps1' -Raw).Contains('subtree-modules.yaml')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Create: .github/workflows/check-updates.yml, modules/.gitkeep, .gitignore, README.md, subtree-modules.yaml. Support -Force to overwrite."
        },
        {
          "id": "subtask-3-2",
          "description": "Implement Get-PSSubtreeModule to list tracked modules with wildcard support",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Public/Get-PSSubtreeModule.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Public/Get-PSSubtreeModule.ps1' -and (Get-Content -Path 'source/Public/Get-PSSubtreeModule.ps1' -Raw).Contains('-like')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Read from YAML config. Return PSCustomObject with Name, Repository, Ref properties. Support -Name with wildcards (default '*')."
        },
        {
          "id": "subtask-3-3",
          "description": "Implement Add-PSSubtreeModule to add modules via git subtree",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Public/Add-PSSubtreeModule.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Public/Add-PSSubtreeModule.ps1' -and (Get-Content -Path 'source/Public/Add-PSSubtreeModule.ps1' -Raw).Contains('subtree add')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Execute: git subtree add --prefix=modules/<Name> <Repo> <Ref> --squash. Update YAML config. Commit with conventional message. SupportsShouldProcess."
        }
      ]
    },
    {
      "id": "phase-4-extended-public",
      "name": "Extended Public Functions",
      "type": "implementation",
      "description": "Implement Update, Remove, and Status checking public functions that build on core functionality",
      "depends_on": [
        "phase-3-core-public"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-4-1",
          "description": "Implement Update-PSSubtreeModule to update modules to latest or specific version",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Public/Update-PSSubtreeModule.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Public/Update-PSSubtreeModule.ps1' -and (Get-Content -Path 'source/Public/Update-PSSubtreeModule.ps1' -Raw).Contains('subtree pull')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Execute: git subtree pull --prefix=modules/<Name> <Repo> <Ref> --squash. Support -Name or -All. Update YAML if ref changed. SupportsShouldProcess."
        },
        {
          "id": "subtask-4-2",
          "description": "Implement Remove-PSSubtreeModule to remove modules from repository",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Public/Remove-PSSubtreeModule.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Public/Remove-PSSubtreeModule.ps1' -and (Get-Content -Path 'source/Public/Remove-PSSubtreeModule.ps1' -Raw).Contains('git rm')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Execute: git rm -rf modules/<Name>. Update YAML config. Commit with conventional message. Support -Force to skip confirmation. SupportsShouldProcess."
        },
        {
          "id": "subtask-4-3",
          "description": "Implement Get-PSSubtreeModuleStatus to check for upstream updates",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Public/Get-PSSubtreeModuleStatus.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Public/Get-PSSubtreeModuleStatus.ps1' -and (Get-Content -Path 'source/Public/Get-PSSubtreeModuleStatus.ps1' -Raw).Contains('UpstreamCommit')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Compare local vs upstream commits. Return: Name, Ref, Status, LocalCommit, UpstreamCommit. Support -UpdateAvailable filter. Verbose output with full commit details."
        }
      ]
    },
    {
      "id": "phase-5-utility-functions",
      "name": "Utility Functions",
      "type": "implementation",
      "description": "Implement dependency validation and profile configuration functions",
      "depends_on": [
        "phase-3-core-public"
      ],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-5-1",
          "description": "Implement Test-PSSubtreeModuleDependency to validate module dependencies",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Public/Test-PSSubtreeModuleDependency.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Public/Test-PSSubtreeModuleDependency.ps1' -and (Get-Content -Path 'source/Public/Test-PSSubtreeModuleDependency.ps1' -Raw).Contains('Import-PowerShellDataFile')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Use Import-PowerShellDataFile (NOT Test-ModuleManifest). Check RequiredModules, ExternalModuleDependencies, NestedModules. Search repo modules/ and PSModulePath."
        },
        {
          "id": "subtask-5-2",
          "description": "Implement Install-PSSubtreeModuleProfile to configure PSModulePath in profile",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "source/Public/Install-PSSubtreeModuleProfile.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'source/Public/Install-PSSubtreeModuleProfile.ps1' -and (Get-Content -Path 'source/Public/Install-PSSubtreeModuleProfile.ps1' -Raw).Contains('PSModulePath')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Modify $PROFILE to add modules path. Apply to current session immediately. MUST be idempotent - no duplicates. Create profile file if missing."
        }
      ]
    },
    {
      "id": "phase-6-unit-tests",
      "name": "Unit Tests",
      "type": "implementation",
      "description": "Create comprehensive unit tests for all private and public functions using Pester",
      "depends_on": [
        "phase-4-extended-public",
        "phase-5-utility-functions"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-6-1",
          "description": "Create unit tests for private helper functions",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "tests/Unit/Private/Invoke-GitCommand.Tests.ps1",
            "tests/Unit/Private/Get-ModuleConfig.Tests.ps1",
            "tests/Unit/Private/Save-ModuleConfig.Tests.ps1",
            "tests/Unit/Private/Get-UpstreamInfo.Tests.ps1",
            "tests/Unit/Private/Get-SubtreeInfo.Tests.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"(Get-ChildItem -Path 'tests/Unit/Private/*.Tests.ps1').Count -ge 5\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Mock external commands (git). Test error handling, edge cases. Verify YAML ordering preserved."
        },
        {
          "id": "subtask-6-2",
          "description": "Create unit tests for Initialize, Get, and Add functions",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "tests/Unit/Public/Initialize-PSSubtreeModule.Tests.ps1",
            "tests/Unit/Public/Get-PSSubtreeModule.Tests.ps1",
            "tests/Unit/Public/Add-PSSubtreeModule.Tests.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"(Get-ChildItem -Path 'tests/Unit/Public/*.Tests.ps1' | Where-Object { $_.Name -match 'Initialize|Get-PSSubtreeModule\\.Tests|Add' }).Count -ge 3\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Test file creation, wildcard filtering, git subtree add. Mock git commands. Test ShouldProcess."
        },
        {
          "id": "subtask-6-3",
          "description": "Create unit tests for Update, Remove, and Status functions",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "tests/Unit/Public/Update-PSSubtreeModule.Tests.ps1",
            "tests/Unit/Public/Remove-PSSubtreeModule.Tests.ps1",
            "tests/Unit/Public/Get-PSSubtreeModuleStatus.Tests.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"(Get-ChildItem -Path 'tests/Unit/Public/*.Tests.ps1' | Where-Object { $_.Name -match 'Update|Remove|Status' }).Count -ge 3\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Test -All parameter, -Force confirmation, update detection. Mock git and network operations."
        },
        {
          "id": "subtask-6-4",
          "description": "Create unit tests for Test-Dependency and Install-Profile functions",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "tests/Unit/Public/Test-PSSubtreeModuleDependency.Tests.ps1",
            "tests/Unit/Public/Install-PSSubtreeModuleProfile.Tests.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"(Get-ChildItem -Path 'tests/Unit/Public/*.Tests.ps1' | Where-Object { $_.Name -match 'Dependency|Profile' }).Count -ge 2\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Test manifest parsing, dependency resolution. Test profile idempotency. Mock file system for profile tests."
        }
      ]
    },
    {
      "id": "phase-7-integration-tests",
      "name": "Integration Tests",
      "type": "implementation",
      "description": "Create integration tests that verify end-to-end workflows with real git operations",
      "depends_on": [
        "phase-6-unit-tests"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-7-1",
          "description": "Create integration test for full workflow: Initialize -> Add -> Get -> Update -> Remove",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "tests/Integration/FullWorkflow.Tests.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'tests/Integration/FullWorkflow.Tests.ps1'\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Use temp directory with real git repo. Test actual git subtree operations. Verify conventional commits created."
        },
        {
          "id": "subtask-7-2",
          "description": "Create integration test for dependency validation workflow",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "tests/Integration/DependencyValidation.Tests.ps1"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'tests/Integration/DependencyValidation.Tests.ps1'\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Create test modules with dependencies. Verify Test-PSSubtreeModuleDependency identifies missing deps."
        }
      ]
    },
    {
      "id": "phase-8-documentation-cicd",
      "name": "Documentation and CI/CD",
      "type": "implementation",
      "description": "Create README documentation and GitHub Actions CI/CD workflow",
      "depends_on": [
        "phase-7-integration-tests"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-8-1",
          "description": "Create comprehensive README.md with installation and usage examples",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            "README.md"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path 'README.md' -and (Get-Content -Path 'README.md' -Raw).Contains('Install-Module')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Include: installation, quick start, all command examples, configuration format, workflow examples."
        },
        {
          "id": "subtask-8-2",
          "description": "Create GitHub Actions CI/CD workflow for build and test",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [
            ".github/workflows/ci.yml"
          ],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"Test-Path -Path '.github/workflows/ci.yml' -and (Get-Content -Path '.github/workflows/ci.yml' -Raw).Contains('build.ps1')\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "Run on push/PR to main. Install dependencies, build, test. Support Windows, Linux, macOS."
        }
      ]
    },
    {
      "id": "phase-9-verification",
      "name": "Final Verification",
      "type": "integration",
      "description": "Run full test suite, verify code coverage, and ensure all acceptance criteria are met",
      "depends_on": [
        "phase-8-documentation-cicd"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-9-1",
          "description": "Run PSScriptAnalyzer and fix any warnings",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"$results = Invoke-ScriptAnalyzer -Path source/ -Recurse; $results.Count -eq 0\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "No warnings or errors allowed. Fix any issues found."
        },
        {
          "id": "subtask-9-2",
          "description": "Run full test suite and verify 80%+ code coverage",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"./build.ps1 -Tasks test; $LASTEXITCODE -eq 0\"",
            "expected": "True"
          },
          "status": "pending",
          "notes": "All unit and integration tests must pass. Coverage should be >= 80%."
        },
        {
          "id": "subtask-9-3",
          "description": "Verify all public functions have complete comment-based help",
          "service": "PSSubtreeModules",
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "pwsh -Command \"$funcs = Get-ChildItem -Path source/Public/*.ps1; foreach ($f in $funcs) { if (-not (Get-Content $f -Raw).Contains('.SYNOPSIS')) { throw \\\"Missing help in $f\\\" } }; 'OK'\"",
            "expected": "OK"
          },
          "status": "pending",
          "notes": "Every public function must have .SYNOPSIS, .DESCRIPTION, .PARAMETER, .EXAMPLE"
        }
      ]
    }
  ],
  "summary": {
    "total_phases": 9,
    "total_subtasks": 29,
    "services_involved": [
      "PSSubtreeModules"
    ],
    "parallelism": {
      "max_parallel_phases": 2,
      "parallel_groups": [
        {
          "phases": [
            "phase-4-extended-public",
            "phase-5-utility-functions"
          ],
          "reason": "Both depend on phase-3, different file sets, can run concurrently"
        }
      ],
      "recommended_workers": 1,
      "speedup_estimate": "1.2x faster with 2 workers for phases 4-5"
    },
    "startup_command": "source auto-claude/.venv/bin/activate && python auto-claude/run.py --spec 001 --parallel 1"
  },
  "verification_strategy": {
    "risk_level": "high",
    "skip_validation": false,
    "test_creation_phase": "post_implementation",
    "test_types_required": [
      "unit",
      "integration"
    ],
    "security_scanning_required": false,
    "staging_deployment_required": false,
    "acceptance_criteria": [
      "Sampler bootstrap complete using CompleteSample template",
      "All 8 public functions implemented with comment-based help",
      "All 5 private functions implemented",
      "SupportsShouldProcess for Add, Update, Remove functions",
      "Unit tests with 80%+ code coverage",
      "Integration tests passing",
      "Build succeeds without errors",
      "All tests pass",
      "No PSScriptAnalyzer warnings",
      "README with installation and usage examples"
    ],
    "verification_steps": [
      {
        "name": "Build",
        "command": "./build.ps1 -Tasks build",
        "expected_outcome": "Build completes successfully",
        "type": "build",
        "required": true,
        "blocking": true
      },
      {
        "name": "Unit Tests",
        "command": "./build.ps1 -Tasks test",
        "expected_outcome": "All tests pass with 80%+ coverage",
        "type": "test",
        "required": true,
        "blocking": true
      },
      {
        "name": "PSScriptAnalyzer",
        "command": "Invoke-ScriptAnalyzer -Path source/ -Recurse",
        "expected_outcome": "No warnings or errors",
        "type": "lint",
        "required": true,
        "blocking": true
      }
    ],
    "reasoning": "High risk due to git operations and profile modification. 80%+ coverage explicitly required in acceptance criteria. Integration tests needed to verify actual git subtree behavior."
  },
  "qa_acceptance": {
    "unit_tests": {
      "required": true,
      "commands": [
        "./build.ps1 -Tasks test"
      ],
      "minimum_coverage": 80
    },
    "integration_tests": {
      "required": true,
      "commands": [
        "./build.ps1 -Tasks test"
      ],
      "services_to_test": [
        "PSSubtreeModules"
      ]
    },
    "e2e_tests": {
      "required": false,
      "commands": [],
      "flows": []
    },
    "browser_verification": {
      "required": false,
      "pages": []
    },
    "database_verification": {
      "required": false,
      "checks": []
    },
    "code_quality": {
      "required": true,
      "checks": [
        "PSScriptAnalyzer shows no warnings",
        "All public functions have comment-based help",
        "Conventional commit messages used correctly",
        "YAML configuration round-trips without data loss"
      ]
    }
  },
  "qa_signoff": null,
  "created_at": "2026-02-04T04:50:00.000Z",
  "updated_at": "2026-02-04T02:55:46.458Z",
  "status": "in_progress",
  "planStatus": "in_progress",
  "last_updated": "2026-02-04T02:57:39.934153+00:00"
}